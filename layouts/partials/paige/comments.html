{{ $page := . }}

{{ template "_internal/disqus.html" . }}
{{ if $page.Param "paige.comments.cactus" }}
    <section class="mb-3">
        <script type="text/javascript" src="https://latest.cactus.chat/cactus.js"></script>
        <link rel="stylesheet" href="https://latest.cactus.chat/style.css" type="text/css">
        <div id="comment-section"></div>
        <script>
        initComments({
            node: document.getElementById("comment-section"),
            defaultHomeserverUrl: "https://matrix.cactus.chat:8448",
            serverName: "cactus.chat",
            siteName: "{{ $page.Param "paige.comments.cactus.account_id" | safeJS }}",
            commentSectionId: "{{ $page.RelPermalink | safeJS }}"
        })
        </script>
        <noscript>{{ i18n "paige_noscript" }}</noscript>
    </section>
{{ end }}
{{ with $page.Param "paige.comments.commento" }}
    <section class="mb-3">
        <div id="commento"></div>
        <script defer src="{{ .script_url }}"></script>
        <noscript>{{ i18n "paige_noscript" }}</noscript>
    </section>
{{ end }}
{{ if $page.Param "paige.comments.graphcomment" }}
    <section class="mb-3">
        <div id="graphcomment"></div>
        <script type="text/javascript">
        var __semio__params = {
            graphcommentId: "{{ $page.Param "paige.comments.graphcomment.account_id" | safeJS }}",
            behaviour: {
                uid: "{{ $page.RelPermalink | safeJS }}"
            }
        };
        function __semio__onload() {
            __semio__gc_graphlogin(__semio__params)
        }
        (function() {
            var gc = document.createElement('script'); gc.type = 'text/javascript'; gc.async = true;
            gc.onload = __semio__onload; gc.defer = true; gc.src = 'https://integration.graphcomment.com/gc_graphlogin.js?' + Date.now();
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(gc);
        })();
        </script>
        <noscript>{{ i18n "paige_noscript" }}</noscript>
    </section>
{{ end }}
{{ if $page.Param "paige.comments.hyvor" }}
    <section class="mb-3">
        <div id="hyvor-talk-view"></div>
        <script type="text/javascript">
        var HYVOR_TALK_WEBSITE = "{{ $page.Param "paige.comments.hyvor.account_id" | safeJS }}";
        var HYVOR_TALK_CONFIG = {
            url: false,
            id: "{{ $page.RelPermalink | safeJS }}"
        };
        </script>
        <script async type="text/javascript" src="//talk.hyvor.com/web-api/embed"></script>
        <noscript>{{ i18n "paige_noscript" }}</noscript>
    </section>
{{ end }}
{{ if $page.Param "paige.comments.intensedebate" }}
    <section class="mb-3">
        <script>
        var idcomments_acct = "{{ $page.Param "paige.comments.intensedebate.account_id" | safeJS }}";
        var idcomments_post_id = "{{ $page.RelPermalink | safeJS }}";
        var idcomments_post_url = "{{ $page.Permalink | safeJS }}";
        </script>
        <span id="IDCommentsPostTitle" style="display:none"></span>
        <script type="text/javascript" src="http://www.intensedebate.com/js/genericCommentWrapperV2.js"></script>
        <noscript>{{ i18n "paige_noscript" }}</noscript>
    </section>
{{ end }}
{{ with $page.Param "paige.comments.isso" }}
    <section class="mb-3">
        <script src="{{ .script_url }}"></script>
        <section id="isso-thread">
            <noscript>{{ i18n "paige_noscript" }}</noscript>
        </section>
    </section>
{{ end }}
{{ with $page.Param "paige.comments.muut" }}
    <section class="mb-3">
        <a href="https://muut.com/i/{{ .account_id }}/comments" class="muut" type="dynamic">Comments</a>
        <script src="https://cdn.muut.com/1/moot.min.js"></script>
        <noscript>{{ i18n "paige_noscript" }}</noscript>
    </section>
{{ end }}
{{ if $page.Param "paige.comments.remark42" }}
    <section class="mb-3">
        <div id="remark42"></div>
        <script>
        var remark_config = {
            host: "{{ $page.Param "paige.comments.remark42.host_url" | safeJS }}",
            site_id: "{{ $page.Param "paige.comments.remark42.site_id" | default `remark` | safeJS }}"
        }
        </script>
        <script>!function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);</script>
        <noscript>{{ i18n "paige_noscript" }}</noscript>
    </section>
{{ end }}
{{ if $page.Param "paige.comments.replybox" }}
    <section class="mb-3">
        <div id="replybox"></div>
        <script>
        window.replybox = {
            site: "{{ $page.Param "paige.comments.replybox.account_id" | safeJS }}",
            identifier: "{{ $page.RelPermalink | safeJS }}"
        };
        </script>
        <script src="https://cdn.getreplybox.com/js/embed.js"></script>
        <noscript>{{ i18n "paige_noscript" }}</noscript>
    </section>
{{ end }}
{{ with $page.Param "paige.comments.utterances" }}
    <section class="mb-3">
        <script src="https://utteranc.es/client.js" repo="{{ .github_repo }}" issue-term="pathname" theme="preferred-color-scheme" crossorigin="anonymous" async></script>
        <noscript>{{ i18n "paige_noscript" }}</noscript>
    </section>
{{ end }}
